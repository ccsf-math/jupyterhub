#!/usr/bin/env bash
set -euo pipefail

# Prevent continuing when CONDA_DIR is undefined
: "${CONDA_DIR:?CONDA_DIR not set}"

# Enable nbgitpuller
jupyter server extension enable --sys-prefix nbgitpuller

# Copy configuration files
mkdir -p /srv/conda/envs/notebook/share/jupyter/lab/settings
cp -u overrides.json /srv/conda/envs/notebook/share/jupyter/lab/settings

mkdir -p /srv/conda/envs/notebook/etc/jupyter
cp -u jupyter_lab_config.py /srv/conda/envs/notebook/etc/jupyter
